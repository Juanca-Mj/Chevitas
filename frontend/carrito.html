<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carrito - Chevechita 24/7</title>
  <link rel="stylesheet" href="css/style.css" /> <!-- Ajustado a la carpeta css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
</head>
<body>
  <header class="header">
    <div class="container header-container">
      <!-- Logo + Nombre -->
      <div class="brand">
        <img src="img/logo-chevechita.jpg" alt="Logo Chevechita" class="logo" />
        <h1 class="brand-name">Chevechita 24/7</h1>
      </div>
      
      <!-- Navegación -->
      <nav class="main-nav">
        <a href="index.html" class="nav-link">
          <i class="fas fa-home"></i> Inicio
        </a>
        <a href="catalogo.html" class="nav-link">
          <i class="fas fa-beer"></i> Catálogo
        </a>
        <a href="carrito.html" class="nav-link cart-link active">
          <i class="fas fa-shopping-cart"></i> Carrito
          <span class="cart-count">0</span>
        </a>
      </nav>
    </div>
  </header>
    
  <main>
    <section class="cart-header">
      <div class="cart-header-content">
        <h2 class="cart-title">Tu Carrito de Compras</h2>
        <p class="cart-subtitle">Revisa tus productos seleccionados y procede al pago para recibir tu pedido rápidamente.</p>
      </div>
    </section>
    
    <div class="container">
      <div class="cart-layout" id="cart-with-items">
        <div class="cart-items-container">
          <div class="cart-items-header">
            <h3 class="cart-items-title">
              <i class="fas fa-shopping-cart"></i> Productos en tu carrito
              <span class="cart-items-count">0</span>
            </h3>
            <a href="catalogo.html" class="cart-continue">
              <i class="fas fa-arrow-left"></i> Seguir comprando
            </a>
          </div>
          
          <!-- Los productos del carrito se cargarán dinámicamente aquí -->
          
        </div>
        
        <div class="cart-summary-container">
          <div class="cart-summary-header">
            <h3 class="cart-summary-title">
              <i class="fas fa-receipt"></i> Resumen de compra
            </h3>
          </div>
          <div class="cart-summary-content">
            <div class="cart-summary-row">
              <span class="cart-summary-label">Subtotal</span>
              <span class="cart-summary-value">$0.00</span>
            </div>
            <div class="cart-summary-row">
              <span class="cart-summary-label">Descuento</span>
              <span class="cart-summary-value">-$0.00</span>
            </div>
            <div class="cart-summary-row">
              <span class="cart-summary-label">Envío</span>
              <span class="cart-summary-value">$15.000</span>
            </div>
            <div class="cart-summary-row">
              <span class="cart-summary-label">Código promocional</span>
              <div style="display: flex; gap: 5px;">
                <input type="text" class="codigo-input" placeholder="Código" style="padding: 5px; border-radius: 4px; border: 1px solid #ccc;">
                <button class="codigo-btn" style="padding: 5px 10px; border-radius: 4px; background: #f8f8f8; border: 1px solid #ccc; cursor: pointer;">Aplicar</button>
              </div>
            </div>
          </div>
          <div class="cart-summary-total">
            <span class="cart-summary-total-label">Total</span>
            <span class="cart-summary-total-value">$15.000</span>
          </div>
          <div class="cart-checkout">
            <button class="checkout-button">
              <i class="fas fa-lock"></i> Proceder al pago
            </button>
            <div class="cart-methods">
              <p>Métodos de pago aceptados</p>
              <div class="payment-methods">
                <i class="fab fa-cc-visa payment-method"></i>
                <i class="fab fa-cc-mastercard payment-method"></i>
                <i class="fab fa-paypal payment-method"></i>
                <i class="fas fa-money-bill-wave payment-method"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Carrito vacío (inicialmente oculto) -->
      <div class="cart-empty" id="cart-empty" style="display: none;">
        <i class="fas fa-shopping-cart cart-empty-icon"></i>
        <h3 class="cart-empty-message">Tu carrito está vacío</h3>
        <p class="cart-empty-info">¡Añade algunas cervezas para continuar con tu compra!</p>
        <a href="catalogo.html" class="return-button">
          <i class="fas fa-beer"></i> Ver catálogo
        </a>
      </div>
    </div>
  </main>
  
  <footer class="footer">
    <div class="container footer-container">
      <div class="footer-brand">
        <img src="img/isologo-chevechita.jpg" alt="Isologo Chevechita" class="footer-isologo" />
        <p>Tu chevechita fría 24/7</p>
      </div>
      <div class="footer-links">
        <h3>Enlaces rápidos</h3>
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="catalogo.html">Catálogo</a></li>
          <li><a href="carrito.html">Carrito</a></li>
        </ul>
      </div>
      <div class="footer-contact">
        <h3>Contáctanos</h3>
        <p><i class="fab fa-whatsapp"></i> WhatsApp: +57 304 293 1312</p>
        <p><i class="fas fa-map-marker-alt"></i> Dirección: Cl. 61 #3-91, Bucaramanga, Santander</p>
        <div class="social-links">
          <a href="https://www.facebook.com/profile.php?id=61575256942905&locale=es_LA" class="social-link" target="_blank"><i class="fab fa-facebook"></i></a>
          <a href="https://www.instagram.com/chevechita24_7?igsh=MW1mb2o2NGE4Njlzaw==" class="social-link" target="_blank"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>© 2025 Chevechita 24/7. Todos los derechos reservados.</p>
      <p class="footer-disclaimer">El consumo de alcohol está prohibido para menores de edad.</p>
    </div>
  </footer>

  <div class="whatsapp-float">
    <a href="https://wa.me/573042931312" target="_blank">
      <i class="fab fa-whatsapp"></i>
    </a>
  </div>
  
  <script>
    // Obtener elementos del DOM
    const cartWithItems = document.getElementById('cart-with-items');
    const cartEmpty = document.getElementById('cart-empty');
    const cartItemsContainer = document.querySelector('.cart-items-container');
    const cartCount = document.querySelector('.cart-count');
    const cartItemsCount = document.querySelector('.cart-items-count');
    
    // Cargar productos del localStorage
    let carritoItems = [
      {
        id: 1,
        nombre: "Cerveza Coronita",
        imagen: "img/cerveza1.jpg",
        precio: 5500,
        cantidad: 1,
        detalles: "200ml - 4.5% Alc. - Lager Origen: México"
      },
      {
        id: 2,
        nombre: "Aguardiente Amarillo 750 ML",
        imagen: "img/aguardiente1.jpg",
        precio: 52000,
        cantidad: 1,
        detalles: "Botella 750ml - Aguardiente tradicional"
      }
    ];
    
    const descuentoFijo = 0;
    const costoEnvio = 15000;
    
    // Función para dar formato a precios
    function formatPrice(price) {
      return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }
    
    // Función para generar un ID único para cada producto en el DOM
    function generateUniqueId(item, index) {
      return `item-${item.id || index}-${item.nombre.replace(/\s+/g, '-').toLowerCase()}`;
    }
    
    // Función para renderizar los productos en el carrito
    function renderizarCarrito() {
      // Limpiar el contenido manteniendo solo el header
      cartItemsContainer.innerHTML = `
        <div class="cart-items-header">
          <h3 class="cart-items-title">
            <i class="fas fa-shopping-cart"></i> Productos en tu carrito
            <span class="cart-items-count">0</span>
          </h3>
          <a href="catalogo.html" class="cart-continue">
            <i class="fas fa-arrow-left"></i> Seguir comprando
          </a>
        </div>
      `;
      
      // Si hay productos, mostrarlos
      if (carritoItems.length > 0) {
        carritoItems.forEach((item, index) => {
          const uniqueId = generateUniqueId(item, index);
          const cartItemElement = document.createElement('div');
          cartItemElement.className = 'cart-item';
          cartItemElement.setAttribute('data-unique-id', uniqueId);
          cartItemElement.innerHTML = `
            <img src="${item.imagen}" alt="${item.nombre}" class="cart-item-image">
            <div class="cart-item-details">
              <h4 class="cart-item-title">${item.nombre}</h4>
              <div class="cart-item-meta">
                ${item.detalles ? `<span>${item.detalles}</span>` : ''}
              </div>
              <p class="cart-item-price">$${formatPrice(item.precio)}</p>
            </div>
            <div class="cart-item-actions">
              <div class="quantity-control">
                <button class="quantity-btn decrease-btn" data-unique-id="${uniqueId}">-</button>
                <input type="number" class="quantity-input" value="${item.cantidad}" min="1" max="20" readonly>
                <button class="quantity-btn increase-btn" data-unique-id="${uniqueId}">+</button>
              </div>
              <button class="cart-item-remove" data-unique-id="${uniqueId}">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          `;
          cartItemsContainer.appendChild(cartItemElement);
        });
        
        // Añadir event listeners a los nuevos botones
        agregarEventListeners();
      }
      
      // Verificar si el carrito está vacío
      verificarCarritoVacio();
      
      // Actualizar contadores y totales
      actualizarContador();
      actualizarTotales();
    }
    
    // Función para encontrar el índice del producto por su ID único
    function findItemIndexByUniqueId(uniqueId) {
      return carritoItems.findIndex((item, index) => 
        generateUniqueId(item, index) === uniqueId
      );
    }
    
    // Event listeners para los botones de cantidad y eliminar
    function agregarEventListeners() {
      const decreaseBtns = document.querySelectorAll('.decrease-btn');
      const increaseBtns = document.querySelectorAll('.increase-btn');
      const removeButtons = document.querySelectorAll('.cart-item-remove');
      
      decreaseBtns.forEach((btn) => {
        btn.addEventListener('click', () => {
          const uniqueId = btn.getAttribute('data-unique-id');
          const index = findItemIndexByUniqueId(uniqueId);
          
          if (index !== -1 && carritoItems[index].cantidad > 1) {
            carritoItems[index].cantidad -= 1;
            guardarCarritoYActualizar();
          }
        });
      });
      
      increaseBtns.forEach((btn) => {
        btn.addEventListener('click', () => {
          const uniqueId = btn.getAttribute('data-unique-id');
          const index = findItemIndexByUniqueId(uniqueId);
          
          if (index !== -1 && carritoItems[index].cantidad < 20) {
            carritoItems[index].cantidad += 1;
            guardarCarritoYActualizar();
          }
        });
      });
      
      removeButtons.forEach((btn) => {
        btn.addEventListener('click', () => {
          const uniqueId = btn.getAttribute('data-unique-id');
          const index = findItemIndexByUniqueId(uniqueId);
          const cartItem = btn.closest('.cart-item');
          
          if (index !== -1) {
            // Animación de salida
            cartItem.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            cartItem.style.opacity = '0';
            cartItem.style.transform = 'translateX(-20px)';
            
            setTimeout(() => {
              carritoItems.splice(index, 1);
              guardarCarritoYActualizar();
            }, 300);
          }
        });
      });
    }
    
    // Guardar carrito en localStorage y actualizar interfaz
    function guardarCarritoYActualizar() {
      // Solo guardamos en localStorage si existe (para compatibilidad)
      if (typeof Storage !== "undefined") {
        localStorage.setItem('carritoItems', JSON.stringify(carritoItems));
      }
      renderizarCarrito();
    }
    
    // Actualizar contador del carrito
    function actualizarContador() {
      let totalItems = 0;
      carritoItems.forEach(item => {
        totalItems += item.cantidad;
      });
      
      cartCount.textContent = totalItems;
      const itemsCountElement = document.querySelector('.cart-items-count');
      if (itemsCountElement) {
        itemsCountElement.textContent = totalItems;
      }
    }
    
    // Verificar si el carrito está vacío
    function verificarCarritoVacio() {
      if (carritoItems.length === 0) {
        cartWithItems.style.display = 'none';
        cartEmpty.style.display = 'block';
      } else {
        cartWithItems.style.display = 'grid';
        cartEmpty.style.display = 'none';
      }
    }
    
    // Calcular subtotal basado en productos y cantidades
    function calcularSubtotal() {
      let subtotal = 0;
      carritoItems.forEach(item => {
        subtotal += item.precio * item.cantidad;
      });
      return subtotal;
    }
    
    // Función para actualizar totales
    function actualizarTotales() {
      const subtotal = calcularSubtotal();
      const descuento = descuentoFijo;
      const envio = costoEnvio;
      const total = subtotal - descuento + envio;
      
      const summaryValues = document.querySelectorAll('.cart-summary-value');
      const totalElement = document.querySelector('.cart-summary-total-value');
      
      if (summaryValues[0]) {
        summaryValues[0].textContent = '$' + formatPrice(subtotal);
      }
      
      if (summaryValues[1]) {
        summaryValues[1].textContent = '-$' + formatPrice(descuento);
      }
      
      if (summaryValues[2]) {
        summaryValues[2].textContent = '$' + formatPrice(envio);
      }
      
      if (totalElement) {
        totalElement.textContent = '$' + formatPrice(total);
      }
    }
    
    // Aplicar código promocional
    const codigoInput = document.querySelector('.codigo-input');
    const codigoBtn = document.querySelector('.codigo-btn');
    
    if (codigoBtn) {
      codigoBtn.addEventListener('click', () => {
        if (codigoInput.value.trim().toLowerCase() === 'descuento10') {
          alert('¡Código promocional aplicado! Has recibido 10% de descuento.');
          codigoInput.disabled = true;
          codigoBtn.disabled = true;
          codigoBtn.textContent = 'Aplicado';
          
          actualizarTotales();
        } else {
          alert('El código promocional no es válido');
        }
      });
    }
    
    // Botón de checkout
    const checkoutBtn = document.querySelector('.checkout-button');
    
    if (checkoutBtn) {
      checkoutBtn.addEventListener('click', () => {
        alert('¡Procesando tu pedido! Pronto recibirás tus bebidas favoritas.');
      });
    }
    
    // Inicializar carrito al cargar la página
    document.addEventListener('DOMContentLoaded', () => {
      // Cargar desde localStorage si existe
      if (typeof Storage !== "undefined") {
        const savedItems = localStorage.getItem('carritoItems');
        if (savedItems) {
          carritoItems = JSON.parse(savedItems);
        }
      }
      renderizarCarrito();
    });
  </script>
  <script src="js/script.js"></script>
</body>
</html>